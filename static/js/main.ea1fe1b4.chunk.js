(this["webpackJsonpcurso-de-introduccion-a-react"]=this["webpackJsonpcurso-de-introduccion-a-react"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),c=n(6),r=n.n(c),s=(n(14),n(8)),i=n(2),d=n(4),l=n(3),u=function(e,t){var n=a.a.useReducer(b,j({initialValue:t})),o=Object(i.a)(n,2),c=o[0],r=o[1],s=c.error,d=c.loading,l=c.sincronizedItem,u=c.item,O=function(e){return r({type:m.error,payload:e})};a.a.useEffect((function(){try{setTimeout((function(){var n,o=localStorage.getItem(e);o?n=JSON.parse(o):(localStorage.setItem(e,JSON.stringify(t)),n=t),function(e){r({type:m.success,payload:e})}(n)}),1e3)}catch(s){O(s)}}),[l]);return{item:u,saveItem:function(t){try{var n=JSON.stringify(t);localStorage.setItem(e,n),function(e){r({type:m.save,payload:e})}(t)}catch(s){O(s)}},loading:d,error:s,sincronize:function(){r({type:m.sicronized})}}},j=function(e){return{error:!1,loading:!0,sincronizedItem:!0,item:e.initialValue}},m={error:"ERROR",success:"SUCCESS",save:"SAVE",sicronized:"SINCRONIZED"},b=function(e,t){return function(e,t){var n;return n={},Object(d.a)(n,m.error,Object(l.a)(Object(l.a)({},e),{},{error:!0})),Object(d.a)(n,m.success,Object(l.a)(Object(l.a)({},e),{},{error:!1,loading:!1,sincronizedItem:!0,item:t})),Object(d.a)(n,m.save,Object(l.a)(Object(l.a)({},e),{},{item:t})),Object(d.a)(n,m.sicronized,Object(l.a)(Object(l.a)({},e),{},{sincronizedItem:!1,loading:!0})),n}(e,t.payload)[t.type]||e};n(15);var O=n(0);function h(e){var t=e.completedTodos,n=e.totalTodos,o=e.loading;return Object(O.jsxs)("h2",{className:"TodoCounter ".concat(!!o&&"TodoCounter__loading"),children:["Has completado ",t," de ",n," TODOs"]})}n(17);function x(e){var t=e.searchValue,n=e.setSearchValue,o=e.loading;return Object(O.jsx)("input",{className:"TodoSearch",placeholder:"Busca tus TODOs",value:t,onChange:function(e){n(e.target.value)},disabled:!!o})}n(18);function f(e){var t=e.children||e.render;return Object(O.jsxs)("section",{className:"TodoList__container",children:[e.error&&e.onError(),e.loading&&e.onLoading(),!e.loading&&!e.totalTodos&&e.onEmptyTodos(),!!e.totalTodos&&!e.searchTodos.length&&e.onEmptySearchResults(e.searchText),Object(O.jsx)("ul",{children:!e.loading&&!e.error&&e.searchTodos.map(t)})]})}n(19);function g(e){var t=e.completed,n=e.onComplete,o=e.text,a=e.onDelete;return Object(O.jsxs)("li",{className:"TodoItem",children:[Object(O.jsx)("span",{className:"Icon Icon-check ".concat(t&&"Icon-check--active"),onClick:n,children:"\u2714"}),Object(O.jsx)("p",{className:"TodoItem-p ".concat(t&&"TodoItem-p--complete"),children:o}),Object(O.jsx)("span",{className:"Icon Icon-delete",onClick:a,children:"\u2716"})]})}n(20);function p(e){var t=e.openModal,n=e.setOpenModal;return Object(O.jsx)("button",{className:"CreateTodoButton",onClick:function(){n(!t)},children:"+"})}n(21);function v(e){var t=e.children;return r.a.createPortal(Object(O.jsx)("div",{className:"ModalBackground",children:t}),document.getElementById("modal"))}n(22);function T(e){var t=e.addTodo,n=e.openModal,o=e.setOpenModal,c=a.a.useState(""),r=Object(i.a)(c,2),s=r[0],d=r[1],l=function(){o(!n)};return Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==s?(t(s),l()):l()},children:[Object(O.jsxs)("label",{children:["Escribe tu nuevo TODO",Object(O.jsx)("input",{value:s,onChange:function(e){d(e.target.value)},placeholder:"Ingresa tu nueva tarea"})]}),Object(O.jsxs)("div",{className:"TodoForm--buttonContainer",children:[Object(O.jsx)("button",{onClick:l,type:"button",className:"TodoForm__button TodoForm__button--cancel",children:"Cancelar"}),Object(O.jsx)("button",{type:"submit",className:"TodoForm__button TodoForm__button--add",children:"Anadir"})]})]})}n(23);function _(){return Object(O.jsxs)(a.a.Fragment,{children:[Object(O.jsxs)("div",{className:"ItemLoading",children:[Object(O.jsx)("div",{className:"ItemLoading__Shadow"}),Object(O.jsxs)("div",{className:"ItemLoading__text",children:[Object(O.jsx)("div",{className:"ItemLoading__text--left"}),Object(O.jsx)("div",{className:"ItemLoading__text--right"})]})]}),Object(O.jsxs)("div",{className:"ItemLoading",children:[Object(O.jsx)("div",{className:"ItemLoading__Shadow"}),Object(O.jsxs)("div",{className:"ItemLoading__text",children:[Object(O.jsx)("div",{className:"ItemLoading__text--left"}),Object(O.jsx)("div",{className:"ItemLoading__text--right"})]})]}),Object(O.jsxs)("div",{className:"ItemLoading",children:[Object(O.jsx)("div",{className:"ItemLoading__Shadow"}),Object(O.jsxs)("div",{className:"ItemLoading__text",children:[Object(O.jsx)("div",{className:"ItemLoading__text--left"}),Object(O.jsx)("div",{className:"ItemLoading__text--right"})]})]})]})}function I(e){var t=e.children,n=e.loading;return Object(O.jsx)("header",{children:a.a.Children.toArray(t).map((function(e){return a.a.cloneElement(e,{loading:n})}))})}n(24);function N(e){var t=function(e){var t=a.a.useState(!1),n=Object(i.a)(t,2),o=n[0],c=n[1];return a.a.useEffect((function(){var e=function(e){"todoMachineTODOS_V1"===e.key&&(console.log("hubo cambios"),c(!0))};return window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}}),[]),{show:o,toggleShow:function(){e(),c(!1)}}}(e.sincronize),n=t.show,o=t.toggleShow;return n?Object(O.jsx)("div",{className:"changeAlert",children:Object(O.jsxs)("div",{className:"changeAlert__container",children:[Object(O.jsx)("h2",{className:"changeAlert__text",children:"Hubo cambios vuelva a cargar la pagina"}),Object(O.jsx)("button",{onClick:function(){return o()},className:"changeAlert__button",children:"Re-cargar"})]})}):null}var S=function(){var e=function(){var e=u("todoMachineTODOS_V1",[]),t=e.item,n=e.saveItem,o=e.loading,c=e.error,r=e.sincronize,d=a.a.useState(""),l=Object(i.a)(d,2),j=l[0],m=l[1],b=a.a.useState(!1),O=Object(i.a)(b,2),h=O[0],x=O[1],f=t.filter((function(e){return!!e.completed})).length,g=t.length;return{states:{loading:o,error:c,searchTodos:!j.length>=1?t:t.filter((function(e){var t=e.text.toLowerCase(),n=j.toLowerCase();return t.includes(n)})),totalTodos:g,completedTodos:f,searchValue:j,openModal:h},stateUpdaters:{setSearchValue:m,completeTodo:function(e){var o=t.findIndex((function(t){return t.text===e})),a=Object(s.a)(t);a[o].completed=!a[o].completed,n(a)},deleteTodo:function(e){var o=t.findIndex((function(t){return t.text===e})),a=Object(s.a)(t);a.splice(o,1),n(a)},addTodo:function(e){var o=Object(s.a)(t);o.push({text:e,completed:!1}),n(o)},setOpenModal:x,sincronizeTodos:r}}}(),t=e.states,n=e.stateUpdaters,o=t.loading,c=t.error,r=t.searchTodos,d=t.totalTodos,l=t.completedTodos,j=t.searchValue,m=t.openModal,b=n.setSearchValue,S=n.completeTodo,y=n.deleteTodo,L=n.addTodo,C=n.setOpenModal,E=n.sincronizeTodos;return Object(O.jsxs)(a.a.Fragment,{children:[Object(O.jsxs)(I,{loading:o,children:[Object(O.jsx)(h,{totalTodos:d,completedTodos:l}),Object(O.jsx)(x,{searchValue:j,setSearchValue:b})]}),Object(O.jsx)(f,{error:c,loading:o,searchTodos:r,totalTodos:d,searchText:j,onError:function(){return Object(O.jsx)("h2",{children:"Hubo un error"})},onLoading:function(){return Object(O.jsx)(_,{})},onEmptyTodos:function(){return Object(O.jsx)("h2",{children:"\xa1Crea tu primer TODO!"})},onEmptySearchResults:function(e){return Object(O.jsxs)("h2",{children:["No se encontr\xf3 ning\xfan resultado para ",e,", prueba con otra palabra"]})},render:function(e){return Object(O.jsx)(g,{text:e.text,completed:e.completed,onComplete:function(){return S(e.text)},onDelete:function(){return y(e.text)}},e.text)}}),!!m&&Object(O.jsx)(v,{children:Object(O.jsx)(T,{addTodo:L,openModal:m,setOpenModal:C})}),Object(O.jsx)(p,{openModal:m,setOpenModal:C}),Object(O.jsx)(N,{sincronize:E})]})};r.a.render(Object(O.jsx)(S,{}),document.getElementById("root"))}],[[25,1,2]]]);
//# sourceMappingURL=main.ea1fe1b4.chunk.js.map